import fetch from 'sync-fetch';
import { Dict } from 'i18n-js';
import I18n from '../I18n';

export default function fetchNonTeladocTranslations(
  i18n: I18n,
  nonTeladocTranslationsHash: string,
) {
  const response = fetch(`${window.NON_TELADOC_TRANSLATIONS_ENDPOINT_URL}?${new URLSearchParams({
    id: nonTeladocTranslationsHash,
  })}`, {
    method: 'GET',
  });

  if (response.ok) {
    i18n.storage.setNonTeladocTranslations(response.json() as Dict);
  } else {
    i18n.storage.removeNonTeladocTranslations();
  }
}
